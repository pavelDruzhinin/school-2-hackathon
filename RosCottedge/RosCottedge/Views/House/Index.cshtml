@using RosCottedge.Models
@using PagedList.Mvc

@model RosCottedge.ViewModels.HouseIndexViewModel
@{
    ViewBag.Title = "house";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container">
    <h2 class="briefDescription">@Model.House.Name</h2>
    <div class="row">
        <div class="col-md-8 col-sm-12 col-xs-12">

            <div class="slider">
                <div class="sliderHead">
                    <i class="fa fa-map-marker" aria-hidden="true"></i>
                    <h3><span id="Country" style="display:none;">Россия</span><span id="Region">@Model.House.Region</span>,<span id="City">@Model.House.Locality</span>, <span id="Street">@Model.House.Area</span>, <span id="House">@Model.House.HouseNumber</span></h3>
                    <div class="separate"></div>
                    <a href="#map_canvas_house">На карте</a>
                </div>
                <div class="owl-carousel">
                    <div class="item">
                        <img src="../../Content/img/house.jpg" alt="">
                    </div>
                    <div class="item">
                        <img src="../../Content/img/house.jpg" alt="">
                    </div>
                    <div class="item">
                        <img src="../../Content/img/house.jpg" alt="">
                    </div>
                </div>
                <div class="sliderFooter">
                    <div class="countUsersIcon"></div>
                    <p class="countUsers">@Model.House.NumberOfPersons</p>
                    <div class="separate"></div>
                    <p>@Model.House.Price руб. / сутки</p>
                    <div class="separate"></div>
                    <p>@ViewBag.countRev отзывов</p>
                    <div class="separate"></div>
                    <p>Свободен до 15.05</p>
                    <div class="sliderRating">
                        <span id="textSliderRating">Нет оценки</span><div class="separate"></div><p id="numberSliderRating">@Model.House.Rating</p>
                    </div>
                </div>
            </div>

            <div class="fullDescription">
                <div class="descItems">
                    <div class="leftSideOwner">
                        <img src="../../Content/img/jamie_bell.jpg" alt="">
                        <h3>@Model.House.User.FirstName<br>@Model.House.User.LastName</h3>
                    </div>
                    <div class="rightSideOwner">
                        <p><span>На сайте:</span> с 20.01.2017</p>
                        <p><span>Последний раз в сети:</span> 04.07.2017 18:32</p>
                        <p><span>Телефон:</span> @Model.House.User.Phone</p>
                    </div>
                </div>
                <div class="descItems">
                    <h1>Описание</h1>
                    <p>@Model.House.Description</p>
                </div>
                <div class="descItems">
                    <h1>Питание</h1>
                    <p>@Model.House.Food</p>
                </div>
                <div class="descItems">
                    <h1>Трансфер</h1>
                    <p>@Model.House.Transfer</p>
                </div>
                <div class="descItems">
                    <h1>Услуги включенные в стоимость</h1>
                    <p>@Model.House.ServicesIncluded</p>
                </div>
                <div class="descItems">
                    <h1>Услуги за отдельныю плату</h1>
                    <p>@Model.House.AdditionalServices</p>
                </div>
                <div class="descItems">
                    <h1>Условия проживания</h1>
                    <p>@Model.House.Accomodations</p>
                </div>
                <div class="descItems">
                    <h1>Условия бронирования</h1>
                    <p>@Model.House.BookingConditions</p>
                </div>
            </div>

            <div id="map_canvas_house" class="mapBox"></div>

            @if (User.Identity.IsAuthenticated)
            {
                <form method="post" class="formReview" id="formReviewId" action="AddReview">
                    <input type="hidden" value="@Model.House.Id" name="HouseId">
                    <div class="formRowTop">
                        <img src="../../Content/img/jamie_bell.jpg" alt="">
                        <textarea name="Comment" id="Comment" cols="30" rows="5" placeholder="Ваш отзыв:"></textarea>
                    </div>
                    <div class="formRowBottom">
                        <div class="formSelect">
                            <select name="Rating" id="selectRating">
                                <option value="5">Отлично</option>
                                <option value="4">Хорошо</option>
                                <option selected value="3">Удовлетворительно</option>
                                <option value="2">Плохо</option>
                                <option value="1">Ужасно</option>
                            </select>
                        </div>
                        <button class="btnSendReview" type="submit">Оставить отзыв</button>
                    </div>
                </form>



                <div id="defItem" class="reviewItem defaultReview">
                    <div class="reviewUser">
                        <img src="img/jamie_bell.jpg" alt="">
                        <h3 id="defName">@ViewBag.userCurrent.FirstName<br>@ViewBag.userCurrent.LastName</h3>
                    </div>
                    <div class="reviewContent">
                        <p class="travelTime">Время поездки с 08.07.2017 по 10.07.2017</p>
                        <p id="defCom"></p>
                        <p class="ratingReview">Оценка: <span id="defRate">/5</span></p>
                    </div>
                </div>
            }
            <div id="comments">
                @Html.Partial("_Comments", Model)
            </div>
        </div>
        <div class="col-md-4 col-md-offset-0 col-sm-8 col-sm-offset-2 col-xs-8 col-xs-offset-2">
            <form class="formReservation" id="reservation">
                <input type="hidden" value="@Model.House.Id" name="HouseId" />
                <span>Дата заезда</span>
                <span class="textSecondDate hidden-md">Дата выезда</span>
                <input type="date" class="firstDate" name="ArrivalDate" id="firstDateId">
                <span class="textSecDate visible-md">Дата выезда</span>
                <input type="date" class="secondDate" name="DepartureDate" min="first_date" id="secondDateId">
                <textarea name="Description" id="" cols="10" rows="10" placeholder="Подробнее"></textarea>
                <button type="submit" class="btnReservation">Забронировать</button>
            </form>
            <div class="errorBoxDate"></div>
        </div>
    </div>
</div>

<h2>@Model.House.Name</h2><!--Можно удалить все что ниже до Scripts, но пока оставил, может пригодится-->

 <form id="reservation">
        <input type="hidden" value="@Model.House.Id" name="HouseId" />
        <table>
            <tr>
                <td><input type="date" name="ArrivalDate" /> </td>
            </tr>
            <tr>
                <td>
                    <input type="date" name="DepartureDate" />
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" placeholder="Для арендодателя" name="Description" />
                </td>
            </tr>
            <tr><td><input type="submit" value="Забронировать" /> </td><td></td></tr>
        </table>
    </form>
<div class="errorBox"></div>

<hr/>

@if (User.Identity.IsAuthenticated)
{
    <h2>Новый коммент</h2>
    <form method="post" action="AddReview">
        <input type="hidden" value="@Model.House.Id" name="HouseId">

        <label for="Rating">Оценка</label>
        <select class="form-control" id="Rating" name="Rating">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>

        <label for="Comment">Комментарий:</label>
        <textarea rows="5" id="Comment" name="Comment"></textarea>

        <button type="submit">Отправить</button>
        <hr />
    </form>
}


<div id="comments">
    @Html.Partial("_Comments", Model)
</div>

@section scripts {
    @Scripts.Render("/Content/libs/owl-carousel/js/owl.carousel.min.js")
    @Scripts.Render("/Content/script/House.js")
}

